class SIM:
    def __init__(self,arr,var_list,reg_in):
        self.arr=arr
        self.n=len(arr)
        self.halted=0
        self.var_list=var_list
        self.reg_in=reg_in
    def bintodec(self,bin):
        n=len(bin)
        sum=0
        bin=bin[::-1]
        for i in range(n):
            bin[i]=int(bin[i])
            sum=sum+(bin[i]*(2^n))
        return sum
    def dectobin(self,dec):
        j=""
        while dec>0:
            k=dec%2
            dec=dec//2
            k=str(k)
            j=j+k
        j=j[::-1]
        j=str(j)
        result=""
        result+="0"*(16-len(j))
        result+=j
        return result    
    def execute(self,PC):
        if(self.arr[0]=='add'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a+b)
            self.reg_in[self.arr[3]]=c    
            PC+=1
        elif(self.arr[0]=='sub'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a-b)
            self.reg_in[self.arr[3]]=c 
            PC+=1
        elif(self.arr[0]=='mov'):                 
            if(type(self.arr[2]==int)):
                b=""
                b=self.dectobin(self.arr[2])
                self.reg_in[self.arr[2]]=b
                PC+=1
        elif(self.arr[0]=='mov'):
            if(type(self.arr[2]!=int)):
                b=self.bintodec(self.arr[1])
                c=""
                c=self.dectobin(b)
                self.reg_in[self.arr[2]]=c   
                PC+=1 
        elif(arr[0]=='ld'):                 #mem adress data do in binary
            b=bintodec(self.arr[2])
            c=""
            c=self.dectobin(b)
            self.reg_in[self.arr[1]]=c
            PC+=1
        elif(arr[0]=='st'):
            val=self.reg_in[arr[1]]
            #memory adress not initialized
            PC+=1
            
        elif(self.arr[0]=='mul'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a*b)
            self.reg_in[self.arr[3]]=c
            PC+=1
        elif(self.arr[0]=='div'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            d=""
            c=self.dectobin(a/b)
            d=self.dectobin(a%b)
            self.reg_in['000']=c
            self.reg_in['001']=d
            PC+=1
        elif(arr[0]=='rs'):         #imm in dec
            a=""
            a=self.reg_in[arr[1]]
            a=self.bintodec(a)         
            b=arr[2]
            a=a>>b
            a=self.dectobin(a)
            self.reg_in[arr[1]]=a
            PC+=1
        elif(arr[0]=='ls'):          #imm in dec
            a=""
            a=self.reg_in[arr[1]]
            a=self.bintodec(a)         
            b=arr[2]
            a=a<<b
            a=self.dectobin(a)
            self.reg_in[arr[1]]=a
            PC+=1
        elif(self.arr[0]=='xor'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a^b)
            self.reg_in[self.arr[3]]=c 
            PC+=1
        elif(self.arr[0]=='or'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a|b)
            self.reg_in[self.arr[3]]=c 
            PC+=1
        elif(self.arr[0]=='and'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            c=""
            c=self.dectobin(a&b)
            self.reg_in[self.arr[3]]=c 
            PC+=1  
        elif(self.arr[0]=='not'):
            a=self.bintodec(self.arr[1])
            c=""
            c=self.dectobin(~a)
            self.reg_in[self.arr[3]]=c
            PC+=1
        elif(self.arr[0]=='cmp'):
            a=self.bintodec(self.arr[1])
            b=self.bintodec(self.arr[2])
            if(a>b):
                self.reg_in['111'][14]='1'
                PC+=1
            elif(a<b):
                self.reg_in['111'][13]='1' 
                PC+=1           
            elif(a==b):
                self.reg_in['111'][15]='1'
                PC+=1
        elif(self.arr[0]=='jmp'):
            pcnew=int(self.arr[1])
            PC=pcnew
        elif(self.arr[0]=='jlt'):
            pcnew=int(self.arr[1])
            if(self.reg_in['111'][13]==1):
                PC=pcnew
            else:
                PC=PC+1
        elif(self.arr[0]=='jgt'):
            pcnew=int(self.arr[1])
            if(self.reg_in['111'][14]==1):
                PC=pcnew
            else:
                PC=PC+1
        elif(self.arr[0]=='je'):
            pcnew=int(self.arr[1])
            if(self.reg_in['111'][15]==1):
                PC=pcnew
            else:
                PC=PC+1            
        elif(self.arr[0]=='hlt'):
            self.halted=1                          